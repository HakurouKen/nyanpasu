!function(n,t,e){function o(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase()}function r(n,e){"addEventListener"in t?n.addEventListener("click",e,!1):n.attachEvent("onclick",e)}var i={_getXhr:function(){var t=null;return t=n.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},ajax:function(n,t,e,r,i){if("object"===o(a)){var a=n;return this.ajax(a.method,a.url,a.data,a.success,a.error)}"function"===o(e)&&(r=e,i=r,e={});var u,c,s=[];if(n=n.toLowerCase(),"object"===o(e)){for(u in e)e.hasOwnProperty(u)&&s.push(encodeURIComponent(u)+"&"+encodeURIComponent(e[u]));e=s.join("&")}return c=this._getXhr(),"get"===n?(e?c.open("GET",t+(t.indexOf("?")>=0?"&":"?")+e,!0):c.open("GET",t,!0),c.send()):"post"===n&&(c.open("POST",t,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(e)),c.onreadystatechange=function(){4==c.readyState&&(200==c.status?"function"===o(r)&&r.call(null,c.responseText):"function"===o(i)&&i.call(null,c))},c},get:function(n,t,e){return this.ajax("GET",n,t,e)},post:function(n,t,e,o){return this.ajax("POST",n,t,e,o)}},a=function(n){for(var t,e,o=0,r=["ms","moz","webkit","o"],i=0;i<r.length&&!n.requestAnimationFrame;++i)t=n[r[i]+"RequestAnimationFrame"],e=n[r[i]+"CancelAnimationFrame"]||n[r[i]+"CancelRequestAnimationFrame"];return t||(t=function(t,e){var r=(new Date).getTime(),i=Math.max(0,16-(r-o)),a=n.setTimeout(function(){t(r+i)},i);return o=r+i,a}),e||(e=function(n){clearTimeout(n)}),{requestAnimationFrame:t,cancelAnimationFrame:e}}(n),u=function(n){function t(n){i.get(n,function(n){s.onmessage&&s.onmessage.call(s,n)},function(){s.onerror&&s.onerror.call(s,result),r++})}var e,o=!1,r=0,a=new Audio("media/nyanpasu.mp3"),u=2e3,c=5,s={onmessage:null,onerror:null,onclose:null,init:function(){if(!o){o=!0;var n=this;return e=setInterval(function(){c>r?t("/get"):n.close()},u),this}},add:function(){return t("/add"),a.currentTime=0,a.play(),this},close:function(){return clearInterval(e),this.onclose&&this.onclose(),this}};return s}(n),c=function(n,t){function o(){var n=0;i>u&&(n=(i-u)/60^0,u+=n||1,r[s?"textContent":"innerText"]=u),c&&a.requestAnimationFrame(o)}var r=t.getElementById("count"),i=parseInt(r.innerText||r.textContent,10)||0,u=i,c=!0,s="undefined"==typeof r.innerText;return{num:function(n){return n===e?n:i>=n?n:n>i?i=n:void 0},stop:function(){return c=!1,this},start:function(){return c=!0,a.requestAnimationFrame(o),this}}}(n,t);c.start(),u.onmessage=function(n){n=JSON.parse(n),n&&n.nyanpasu&&c.num(+n.nyanpasu)},u.onerror=function(){},u.onclose=function(){},u.init(),r(t.getElementById("nyanpasu"),function(){u.add()})}(window,document);